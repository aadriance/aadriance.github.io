<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <meta content="#ffffff" name="theme-color" />
  <meta content="#da532c" name="msapplication-TileColor" />

  
  <link href='&#x2F;icons&#x2F;site.webmanifest' rel="manifest" />
  
  
  <link color="#5bbad5" href='&#x2F;icons&#x2F;safari-pinned-tab.svg' rel="mask-icon" />
  
  
  <link href='&#x2F;icons&#x2F;favicon-16x16.png' rel="icon" sizes="16x16" type="image/png" />
  
  
  <link href='&#x2F;icons&#x2F;favicon-32x32.png' rel="icon" sizes="32x32" type="image/png" />
  
  
  <link href='&#x2F;icons&#x2F;apple-touch-icon.png' rel="apple-touch-icon" sizes="180x180" />
  

  

  

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.1/css/academicons.min.css" integrity="sha384-FIue+PI4SsI9XfHCz8dBLg33b0c1fMJgNU3X//L26FYbGnlSEfWmNT7zgWc2N9b6" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link href="https://www.andrewadriance.com/deep-thought.css" rel="stylesheet" />
  
  

  <title>
    
Andrew Adriance | Your Code is Either Deprecated a Hero or Maintained as Legacy

  </title>

  
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-CZSTFH31S7"></script>
  <script type="text/javascript">
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());
    gtag("config", "G-CZSTFH31S7");
  </script>
  
  

  
</head>

<body class="has-background-white">
  <nav aria-label="section navigation" class="navbar is-light" role="navigation">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item is-size-5 has-text-weight-bold" href="https:&#x2F;&#x2F;www.andrewadriance.com">Andrew Adriance</a>
        <a aria-expanded="false" aria-label="menu" class="navbar-burger burger" data-target="navMenu" role="button">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div class="navbar-menu" id="navMenu">
        <div class="navbar-end has-text-centered">
          
          
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;www.andrewadriance.com&#x2F;">
            Home
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;www.andrewadriance.com&#x2F;curriculum">
            Curriculum Vitae
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;www.andrewadriance.com&#x2F;posts">
            Posts
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;www.andrewadriance.com&#x2F;tags">
            Tags
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;www.andrewadriance.com&#x2F;categories">
            Categories
          </a>
          
          
          
          <a class="navbar-item" id="nav-search" title="Search" data-target="#search-modal">
            <span class="icon">
              <i class="fas fa-search"></i>
            </span>
          </a>
          <a class="navbar-item" id="dark-mode" title="Switch to dark theme">
            <span class="icon">
              <i class="fas fa-adjust"></i>
            </span>
          </a>
        </div>
      </div>
    </div>
  </nav>

  
  

  
<section class="section">
  <div class="container">
    <div class="columns">
      <div class="column is-8 is-offset-2">
        <article class="box">
          <h1 class="title">
            Your Code is Either Deprecated a Hero or Maintained as Legacy
          </h1>
          <p class="subtitle"></p>
          <div class="columns is-multiline is-gapless">
            <div class="column is-8">
              
<span class="icon-text has-text-grey">
  <span class="icon">
    <i class="fas fa-user"></i>
  </span>
  <span>Andrew Adriance published on</span>
  <span class="icon">
    <i class="far fa-calendar-alt"></i>
  </span>
  <span><time datetime="2023-06-25">June 25, 2023</time></span>
</span>

            </div>
            <div class="column is-4 has-text-right-desktop">
              
<span class="icon-text has-text-grey">
  <span class="icon">
    <i class="far fa-clock"></i>
  </span>
  <span>5 min,</span>
  <span class="icon">
    <i class="fas fa-pencil-alt"></i>
  </span>
  <span>999 words</span>
</span>

            </div>
            <div class="column">
              
              
<p>
  Categories:
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://www.andrewadriance.com/categories/programming/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-cube"></i>
      </span>
      <span>programming</span>
    </span>
  </a>
  
</p>

              
            </div>
            <div class="column has-text-right-desktop">
              
              
<p>
  Tags:
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://www.andrewadriance.com/tags/workflow/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-tag"></i>
      </span>
      <span>workflow</span>
    </span>
  </a>
  
</p>

              
            </div>
          </div>
          <div class="content mt-2">
            <p>There is frequent discourse on how to make code more maintainable. I for one think more discussion is needed on making code deprecateable. It may be nice to envision that a beautifully designed code base will last forever, but there are two things certain for code; becoming legacy, getting deprecated, and off by one errors.</p>
<span id="continue-reading"></span><h1 id="isn-t-disposable-code-bad">Isn't Disposable Code Bad?</h1>
<p>I believe all code is destined to be legacy code. It doesn't matter if it's because the architect behind it retired, business needs changed, or you wrote this 6 months ago in a caffeine-hyped state while hurdling toward a deadline at terminal velocity. Some day, this well-intentioned pile of code is going to get opened to investigate a bug, and the poor soul trying to figure out what's wrong will drop their head into their hands bewildered this code passed muster and made it to production. Sometimes you check the git log and realize it was your arch-rival, your past self, that produced this dastardly code.</p>
<p>Once this legacy code has lived a good life, what's to be done with it? I advocate that it is given a respectful funeral and replaced. Why?</p>
<ul>
<li>Solving a problem a 2nd time with the knowledge of how the first faired in production will result in a more robust implementation. The WET (Write Everything Twice) style of programming even advocates you immediately deprecate the first implementation.</li>
<li>Business needs always changes. Good code won't topple over with every single change, accumulate years of changes and even the most carfelly architected manor will look more Winchester mansion than modern pent house.</li>
<li>Most code has an atrociously low <a href="https://en.wikipedia.org/wiki/Bus_factor">bus factor</a>. If code is designed to be deprecateable, you can always re-set a components bus factor with a new implementation!</li>
</ul>
<p>Side note: Don't re-write things just because. The life time of code varies wildly from decades for certain pieces of software in an operating system to a couple of years (if you're lucky) in javascript land. I can prescribe no universal life-time for code. I do know that life time is finite, and likely much shorter than your own.</p>
<h1 id="the-art-of-deprecation">The Art of Deprecation</h1>
<h2 id="the-logging-is-mightier-than-the-comment">The Logging is Mightier Than The Comment</h2>
<p>I have seen many code snippets with an edge case with a comment along the lines of &quot;You should not be here&quot;. Cool. I have no idea why I'm not suppose to be here, and I have no idea if people end up here in production. A good log serves two purposes:</p>
<ul>
<li>Telemetry for if this condition is hit in production. This insight is valuable for an updated implementation. Can this case be re-factored out? Do we want more in-depth handling here?</li>
<li>Better insight into what this log/comment represents. Since logs are viewed separate from code I observe people write better messages rather than assuming it is self evident from the code.</li>
</ul>
<p>Having the data from a current implementation lets a re-implementation make smart decisions about were to spend effort. Additionally, without logs to guide the new implementation you'll either be forced to import legacy code you don't understand or risk leaving it out and having a production incident.</p>
<h2 id="comments-are-good-too">Comments Are Good Too</h2>
<p>Sometimes comments are still needed. That time is when the business logic is non-obvious. Did this implementation come from a specification? Please add a comment that says what specification, it's version, and relevant section. Is there a clever hack added to the code to avoid an issues that's been seen in production? Please have a reference to the bug in the ticket tracking system or a tl;dr explanation with the code. I've seen many a hacks in code that says &quot;added to avoid issues seen in vendor Xs environment&quot;. Who is the vendor? What was the issue? Or worse, there is some random block of code that looks like:</p>
<pre data-lang="c" style="background-color:#2b303b;color:#c0c5ce;" class="language-c "><code class="language-c" data-lang="c"><span style="color:#b48ead;">if </span><span>(stars_aligned != </span><span style="color:#d08770;">0</span><span>) {
</span><span>   x = x &gt;&gt; </span><span style="color:#d08770;">5</span><span>;
</span><span>}
</span></code></pre>
<p>Please, make life easy on your future self and the future maintainers and deprecators of the code and leave an obvious history.</p>
<h2 id="avoid-coupling">Avoid Coupling</h2>
<p>No, not the object oriented kind. In the OO space, avoiding coupling is often talked about on a micro scale where no class should depend on others. That's usually unrealistic, creates more abstractions than are useful, and is going to make it harder to deprecate the code when the new author is trying to reason about the 7 layers of hell the code was abstracted into.</p>
<p>Instead, avoid coupling from an interface point of view. I'll use a real world technology example: IPMI. IPMI is a protocol for communicating with a special co-processor that ships with server machines for management purposes (machine reboot, firmware flashing, sometimes KVM, and so on). IPMI can travel over several hardware interfaces including: KCS, SSIF, HTTP. The specifics of these interfaces are moot. What would be important for the purposes of deprecation is that the SSIF interface not have coupling with the KCS interface. This would allow a new SSIF interface to be dropped in with ease, allowing for a gradual deprecation of the code instead of a full blown apocalyptic rebirth. Do the smaller parts of the SSIF interface depend on one another? Is it a monolithic module without much abstraction? I don't care if I can slot a new one in.</p>
<h2 id="have-high-level-documentation">Have High Level Documentation</h2>
<p>I run documentation days for my team. I love me some documentation. I don't love over documentation though the quickly grows stale because it no longer matches reality. What I personally do when writing documentation is the following:</p>
<ul>
<li>Document large architectural pieces that won't change short of a large re-write.</li>
<li>Document interesting history where appropriate. Sometimes commenting on edge cases isn't enough to capture large pieces of architecture that were implemented a certain way.</li>
</ul>
<h1 id="get-out-there-and-delete-code">Get Out There and Delete Code</h1>
<p>There is probably too much of it anyway :) While you're at it make sure your new stuff is easy to delete in the future!</p>

          </div>
        </article>
      </div>
      
    </div>
  </div>
</section>


  
  <section class="modal" id="search-modal">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Search</p>
      </header>
      <section class="modal-card-body">
        <div class="field mb-2">
          <div class="control">
            <input class="input" id="search" placeholder="Search this website." type="search" />
          </div>
        </div>
        <div class="search-results">
          <div class="search-results__items"></div>
        </div>
      </section>
    </div>
    <button aria-label="close" class="modal-close is-large"></button>
  </section>
  


  

<section class="section">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <nav class="level">
              
          <div class="level-item has-text-centered">
            <a class="button is-black is-outlined" href="https:&#x2F;&#x2F;www.andrewadriance.com&#x2F;posts&#x2F;amonthofwriting&#x2F;">
              <span class="icon mr-2">
                <i class="fas fa-arrow-circle-left"></i>
              </span>
              One Month Of Posts
            </a>
          </div>
           
          <div class="level-item has-text-centered">
            <a class="button is-black is-outlined" href="https:&#x2F;&#x2F;www.andrewadriance.com&#x2F;posts&#x2F;learnyousomelangs&#x2F;">
              Learn You Some Langs<span class="icon ml-2">
                <i class="fas fa-arrow-circle-right"></i>
              </span>
            </a>
          </div>
          
        </nav>
      </div>
    </div>
  </div>
</section>



  



  
  <footer class="footer py-4">
    <div class="content has-text-centered">
      <p>
        Built with
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-code"></i>
          </span>
          <span>code</span>
        </span>
        and
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-heart"></i>
          </span>
          <span>love</span>
        </span>
      </p>
      <p>
        Powered by
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-power-off"></i>
          </span>
          <span>zola</span>
        </span>
      </p>
    </div>
  </footer>
  

  
  
  
  
  <script src="https://www.andrewadriance.com/elasticlunr.min.js"></script>
  <script src="https://www.andrewadriance.com/search_index.en.js"></script><script src="https://www.andrewadriance.com/js/site.js"></script>

  





  
  
</body>

</html>
